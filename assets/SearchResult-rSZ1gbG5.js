import{u as O,f as te,g as le,h as $,i as ae,P as re,t as se,j as ne,k as q,l as B,m as ie,n as z,p as l,q as oe,R as U,s as ue,v as de,x as me,C as ce,y as pe,z as he,A as ge,B as ve,D as ye,E as C,F as fe,G as we,H as Ee,I as L,J as K,K as ke}from"./app-Btbwx5wL.js";const be=["/","/article/","/article/android-compose-toggle-theme.html","/article/app-deployment-evolution.html","/article/cross-domain.html","/article/debounce-throttle.html","/article/history-of-javascript.html","/article/make-npm-lib.html","/article/sftp-usage.html","/design-pattern/","/develop/","/dump/js-full-stack.html","/reading/","/design-pattern/behavioral/","/design-pattern/behavioral/chain-of-responsibility.html","/design-pattern/behavioral/command.html","/design-pattern/behavioral/iterator.html","/design-pattern/behavioral/mediator.html","/design-pattern/behavioral/memento.html","/design-pattern/behavioral/observer.html","/design-pattern/behavioral/state.html","/design-pattern/behavioral/strategy.html","/design-pattern/behavioral/template-method.html","/design-pattern/behavioral/visitor.html","/design-pattern/creational/","/design-pattern/creational/abstract-factory.html","/design-pattern/creational/builder.html","/design-pattern/creational/factory-method.html","/design-pattern/creational/prototype.html","/design-pattern/creational/singleton.html","/design-pattern/structural/","/design-pattern/structural/adapter.html","/design-pattern/structural/bridge.html","/design-pattern/structural/composite.html","/design-pattern/structural/decorator.html","/design-pattern/structural/facade.html","/design-pattern/structural/flyweight.html","/design-pattern/structural/proxy.html","/develop/android/","/develop/android/adb-wireless-debug.html","/develop/angular/","/develop/angular/angular-i18n.html","/develop/angular/azure-login.html","/develop/angular/components-share-data.html","/develop/angular/karma-config.html","/develop/database/","/develop/database/transaction-isolation-level.html","/develop/git/","/develop/git/git-installation.html","/develop/git/git-tag.html","/develop/git/git-use.html","/develop/html/","/develop/html/classical-layout.html","/develop/html/flex-layout.html","/develop/html/grid-layout.html","/develop/nestjs/","/develop/python/","/develop/react/","/develop/react/usage-of-state.html","/develop/test/","/develop/test/test-coverage-example.html","/develop/typescript/","/develop/typescript/custom-decorator.html","/develop/typescript/generic-function.html","/dump/algorithm/","/dump/algorithm/sort.html","/dump/cloud-native/","/dump/en/","/dump/knowledge/%E5%92%8C___.html","/dump/knowledge/GET%E5%92%8CPOST.html","/dump/knowledge/HTTP%E5%92%8CHTTPS.html","/dump/knowledge/JS%E6%95%B0%E5%AD%97%E7%B2%BE%E5%BA%A6%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98.html","/dump/knowledge/","/dump/knowledge/apply%E3%80%81call%E3%80%81bind.html","/dump/knowledge/arguments%E5%AF%B9%E8%B1%A1.html","/dump/knowledge/px%E3%80%81em%E3%80%81rem%E3%80%81vh%E3%80%81vw.html","/dump/knowledge/state%E5%92%8Cprops.html","/dump/knowledge/this%E5%AF%B9%E8%B1%A1.html","/dump/knowledge/typeof%E5%92%8Cinstanceof.html","/dump/knowledge/var%E3%80%81let%E3%80%81const.html","/dump/knowledge/%E4%BB%80%E4%B9%88%E6%98%AFJavaScript.html","/dump/knowledge/%E4%BD%9C%E7%94%A8%E5%9F%9F.html","/dump/knowledge/%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96.html","/dump/knowledge/%E5%89%A9%E4%BD%99%E5%8F%82%E6%95%B0.html","/dump/knowledge/%E5%93%88%E5%B8%8C%E8%B7%AF%E7%94%B1%E5%92%8CHistory%E8%B7%AF%E7%94%B1.html","/dump/knowledge/%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D.html","/dump/knowledge/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0.html","/dump/knowledge/%E9%97%AD%E5%8C%85.html","/dump/projects/","/dump/software-engineering/","/reading/2022/human-weakness.html","/reading/2022/nonviolent-communication.html","/reading/2023/001-self-control.html","/reading/2023/002-the-great-gatsby.html","/reading/2023/003-intimate-relationship.html","/reading/2023/004-the-courage-to-be-hated.html","/reading/2023/005-devilish-chatting-techniques.html","/reading/2023/006-lean-entrepreneurial-practice.html","/reading/2023/007-island-economics.html","/reading/2023/008-micro-habits-slimming.html","/reading/2023/009-introverts-communicate-the-bible.html","/reading/2023/010-%E5%B0%8F%E7%8E%8B%E5%AD%90.html","/reading/2023/011-rockefeller-letters.html","/reading/2023/012-autobiography-of-franklin.html","/reading/2023/013-secret.html","/reading/2023/014-quotations-from-kazuo-inamori.html","/reading/2023/015-entertain-oneself-to-death.html","/reading/2023/016-changed-my-life-by-learning-english.html","/reading/2023/017-biblical-wisdom.html","/reading/2023/018-desire-and-dignity.html","/reading/2023/019-rural-china.html","/reading/2023/021-addicted.html","/reading/2023/022-excellent-sheep.html","/reading/2024/001-pyramid-principle.html","/reading/2024/002-those-ming-dynasty-things.html","/reading/2024/003-naval.html","/reading/2024/004-xiaomi-entrepreneurial-thinking.html","/reading/2024/005-small-and-beautiful.html","/reading/2024/006-low-risk-entrepreneurship.html","/reading/2024/007-psychology-of-money.html","/reading/2024/008-endless-life.html","/reading/2024/009-why-do-families-hurt.html","/reading/2024/010-someone-moved-my-cheese.html","/reading/2024/011-wang-yang-ming-detailed-biography.html","/reading/2025/001-where-does-the-wealth-go.html","/reading/2025/002-Index-fund-investment-slowly-become-rich.html","/reading/2025/003-the-margin-of-safety-of-modern-value-investment.html","/dump/algorithm/sort/","/dump/algorithm/sort/selection-sort.html","/dump/cloud-native/argocd/","/dump/cloud-native/argocd/argocd.html","/dump/cloud-native/docker/","/dump/cloud-native/docker/docker-architecture.html","/dump/cloud-native/docker/docker-image-build.html","/dump/cloud-native/docker/docker-image-structure.html","/dump/cloud-native/docker/docker-installation.html","/dump/cloud-native/docker/docker-use.html","/dump/cloud-native/kubernetes/","/dump/cloud-native/kubernetes/k8s-release-strategy.html","/dump/cloud-native/kubernetes/sealed-secrets-client-side.html","/dump/en/algorithm/","/dump/en/algorithm/sort.html","/dump/en/projects/","/dump/projects/SKIP-Docs/","/dump/projects/SKIP-Docs/contribute.html","/dump/projects/SKIP-Docs/how-to-use.html","/dump/projects/SKIP-Docs/xiaomi.html","/dump/projects/TinyCRUD-Docs/","/dump/projects/TinyCRUD-Docs/contribution-guide.html","/dump/projects/TinyCRUD-Docs/create-request.html","/dump/projects/TinyCRUD-Docs/start-using.html","/dump/software-engineering/twelve-factor/001-codebase.html","/dump/software-engineering/twelve-factor/002-dependencies.html","/dump/software-engineering/twelve-factor/003-config.html","/dump/software-engineering/twelve-factor/004-backing-services.html","/dump/software-engineering/twelve-factor/005-build-release-run.html","/dump/software-engineering/twelve-factor/006-processes.html","/dump/software-engineering/twelve-factor/007-port-binding.html","/dump/software-engineering/twelve-factor/008-concurrency.html","/dump/software-engineering/twelve-factor/009-disposability.html","/dump/software-engineering/twelve-factor/010-dev-prod-parity.html","/dump/software-engineering/twelve-factor/011-logs.html","/dump/software-engineering/twelve-factor/012-admin-processes.html","/dump/software-engineering/twelve-factor/","/dump/en/algorithm/sort/","/dump/en/algorithm/sort/selection-sort.html","/dump/en/projects/SKIP-Docs/","/dump/en/projects/SKIP-Docs/contribute.html","/dump/en/projects/SKIP-Docs/how-to-use.html","/dump/en/projects/SKIP-Docs/xiaomi.html","/dump/en/projects/TinyCRUD-Docs/","/dump/en/projects/TinyCRUD-Docs/contribution-guide.html","/dump/en/projects/TinyCRUD-Docs/create-request.html","/dump/en/projects/TinyCRUD-Docs/start-using.html","/404.html","/dump/","/reading/2022/","/reading/2023/","/reading/2024/","/reading/2025/"],De="SEARCH_PRO_QUERY_HISTORY",y=O(De,[]),Be=()=>{const{queryHistoryCount:a}=C,r=a>0;return{enabled:r,queryHistory:y,addQueryHistory:s=>{r&&(y.value=Array.from(new Set([s,...y.value.slice(0,a-1)])))},removeQueryHistory:s=>{y.value=[...y.value.slice(0,s),...y.value.slice(s+1)]}}},F=a=>be[a.id]+("anchor"in a?`#${a.anchor}`:""),Ce="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=C,f=O(Ce,[]),Ae=()=>{const a=_>0;return{enabled:a,resultHistory:f,addResultHistory:r=>{if(a){const s={link:F(r),display:r.display};"header"in r&&(s.header=r.header),f.value=[s,...f.value.slice(0,_-1)]}},removeResultHistory:r=>{f.value=[...f.value.slice(0,r),...f.value.slice(r+1)]}}},Re=a=>{const r=ce(),s=$(),A=pe(),i=q(0),k=B(()=>i.value>0),h=he([]);return ge(()=>{const{search:g,terminate:R}=ve(),w=ye(d=>{const E=d.join(" "),{searchFilter:H=p=>p,splitWord:j,suggestionsFilter:P,...v}=r.value;E?(i.value+=1,g(d.join(" "),s.value,v).then(p=>H(p,E,s.value,A.value)).then(p=>{i.value-=1,h.value=p}).catch(p=>{console.warn(p),i.value-=1,i.value||(h.value=[])})):h.value=[]},C.searchDelay-C.suggestDelay);z([a,s],([d])=>w(d),{immediate:!0}),fe(()=>{R()})}),{isSearching:k,results:h}};var je=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:r}){const s=le(),A=$(),i=ae(re),{enabled:k,addQueryHistory:h,queryHistory:g,removeQueryHistory:R}=Be(),{enabled:w,resultHistory:d,addResultHistory:E,removeResultHistory:H}=Ae(),j=k||w,P=se(a,"queries"),{results:v,isSearching:p}=Re(P),n=ne({isQuery:!0,index:0}),m=q(0),c=q(0),Q=B(()=>j&&(g.value.length>0||d.value.length>0)),S=B(()=>v.value.length>0),x=B(()=>v.value[m.value]||null),J=()=>{const{isQuery:e,index:t}=n;t===0?(n.isQuery=!e,n.index=e?d.value.length-1:g.value.length-1):n.index=t-1},Y=()=>{const{isQuery:e,index:t}=n;t===(e?g.value.length-1:d.value.length-1)?(n.isQuery=!e,n.index=0):n.index=t+1},G=()=>{m.value=m.value>0?m.value-1:v.value.length-1,c.value=x.value.contents.length-1},M=()=>{m.value=m.value<v.value.length-1?m.value+1:0,c.value=0},V=()=>{c.value<x.value.contents.length-1?c.value+=1:M()},N=()=>{c.value>0?c.value-=1:G()},T=e=>e.map(t=>ke(t)?t:l(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=we[e.index]||"$content",[o,D=""]=Ee(t)?t[A.value].split("$content"):t.split("$content");return e.display.map(u=>l("div",T([o,...u,D])))}return e.display.map(t=>l("div",T(t)))},b=()=>{m.value=0,c.value=0,r("updateQuery",""),r("close")},X=()=>k?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},i.value.queryHistory),g.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:n.isQuery&&n.index===t}],onClick:()=>{r("updateQuery",e)}},[l(L,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:K,onClick:o=>{o.preventDefault(),o.stopPropagation(),R(t)}})]))])):null,Z=()=>w?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},i.value.resultHistory),d.value.map((e,t)=>l(U,{to:e.link,class:["search-pro-result-item",{active:!n.isQuery&&n.index===t}],onClick:()=>{b()}},()=>[l(L,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(o=>T(o)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:K,onClick:o=>{o.preventDefault(),o.stopPropagation(),H(t)}})]))])):null;return ie("keydown",e=>{if(a.isFocusing){if(S.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=x.value.contents[c.value];h(a.queries.join(" ")),E(t),s.push(F(t)),b()}}else if(w){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const{index:t}=n;n.isQuery?(r("updateQuery",g.value[t]),e.preventDefault()):(s.push(d.value[t].link),b())}}}}),z([m,c],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:a.queries.length?!S.value:!Q.value}],id:"search-pro-results"},a.queries.length?p.value?l(oe,{hint:i.value.searching}):S.value?l("ul",{class:"search-pro-result-list"},v.value.map(({title:e,contents:t},o)=>{const D=m.value===o;return l("li",{class:["search-pro-result-list-item",{active:D}]},[l("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),t.map((u,ee)=>{const I=D&&c.value===ee;return l(U,{to:F(u),class:["search-pro-result-item",{active:I,"aria-selected":I}],onClick:()=>{h(a.queries.join(" ")),E(u),b()}},()=>[u.type==="text"?null:l(u.type==="title"?ue:u.type==="heading"?de:me,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?l("div",{class:"content-header"},u.header):null,l("div",W(u))])])})])})):i.value.emptyResult:j?Q.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{je as default};
